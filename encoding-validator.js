class EncodingValidator{constructor(){this.issues=[],this.init()}init(){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>this.validate()):this.validate(),this.observeContentChanges()}validate(){return this.issues=[],this.validateMetaCharset(),this.validateHtmlAttributes(),this.validateTextContent(),this.validateLanguageDeclarations(),this.reportResults(),0===this.issues.length}validateMetaCharset(){const e=document.querySelector("meta[charset]");if(!e)return void this.addIssue("error","Missing meta charset declaration","head");const t=e.getAttribute("charset")?.toLowerCase();"utf-8"!==t&&this.addIssue("error",`Invalid charset: ${t}. Expected: utf-8`,"meta[charset]")}validateHtmlAttributes(){["content","title","alt","placeholder","aria-label"].forEach(e=>{document.querySelectorAll(`[${e}]`).forEach(t=>{const s=t.getAttribute(e);!s||s.length<5||this.detectCorruption(s)&&this.addIssue("error",`Corrupted text in ${e} attribute`,t.tagName+"["+e+"]",s)})})}validateTextContent(){["title","h1","h2","h3","h4","h5","h6","p","span","div","[data-lang]",'meta[name="description"]','meta[name="keywords"]'].forEach(e=>{document.querySelectorAll(e).forEach(t=>{if("SCRIPT"===t.tagName||"STYLE"===t.tagName||t.classList.contains("gallery-item")||t.classList.contains("menu-item")||t.classList.contains("contact-info")||t.closest(".gallery")||t.closest(".menu-section"))return;const s=t.textContent||t.getAttribute("content")||"";s.length>20&&this.detectCorruption(s)&&this.addIssue("warning","Potential encoding corruption detected",e,s.substring(0,50)+"...")})})}validateLanguageDeclarations(){document.documentElement.getAttribute("lang")||this.addIssue("warning","Missing language declaration on html element","html"),document.querySelectorAll('link[rel="alternate"][hreflang]').forEach(e=>{const t=e.getAttribute("hreflang");t&&/^[a-z]{2}(-[A-Z]{2})?$/.test(t)||this.addIssue("warning",`Invalid hreflang: ${t}`,"link[hreflang]")})}detectCorruption(e){if(!e||e.length<10)return!1;if(/[\u0590-\u05FF\u05EA\u0600-\u06FF\u0400-\u04FF\u0370-\u03FF\u2600-\u27BF\u1F300-\u1F9FF\u20A0-\u20CF\u2005-\u2007\u200B-\u200F\u2000-\u206F\u0300-\u036F&]/.test(e))return!1;if(/[\u05D0-\u05EA]|[\u0621-\u064A]|[\u0410-\u044F]|[\u0391-\u03F1]|¬©|¬Æ|‚Ñ¢|¬∞|¬±|√ó|√∑|‚â§|‚â•|‚â†|‚âà|‚àû|‚àë|‚àè|‚à´|‚àÇ|‚àá|‚àÜ|‚àÖ|‚àà|‚àâ|‚àã|‚äÇ|‚äÉ|‚äÑ|‚äÖ|‚àß|‚à®|¬¨|‚Üí|‚Üê|‚Üë|‚Üì|‚Üî|‚áí|‚áê|‚áë|‚áì|‚áî|‚àÄ|‚àÉ|‚àÑ|‚à¥|‚àµ|‚à∂|‚à∑|‚àù|‚àû|‚àü|‚à†|‚à°|‚à¢|‚à•|‚à¶|‚àß|‚à®|‚à©|‚à™|‚äÇ|‚äÉ|‚äÑ|‚äÖ|‚äÜ|‚äá|‚äà|‚äâ|‚ää|‚äã|‚äå|‚äç|‚äé|‚äè|‚äê|‚äë|‚äí|‚äì|‚äî|‚äï|‚äñ|‚äó|‚äò|‚äô|‚äö|‚äõ|‚äú|‚äù|‚äû|‚äü|‚ä†|‚ä°|‚ä¢|‚ä£|‚ä§|‚ä•|‚ä¶|‚äß|‚ä®|‚ä©|‚ä™|‚ä´|‚ä¨|‚ä≠|‚äÆ|‚äØ|‚ä∞|‚ä±|‚ä≤|‚ä≥|‚ä¥|‚äµ|‚ä∏|‚äπ|‚ä∫|‚äª|‚äº|‚äΩ|‚äæ|‚äø|‚ãÄ|‚ãÅ|‚ãÇ|‚ãÉ|‚ãÑ|‚ãÖ|‚ãÜ|‚ãá|‚ãà|‚ãâ|‚ãä|‚ãã|‚ãå|‚ãç|‚ãé|‚ãè|‚ãê|‚ãë|‚ãí|‚ãì|‚ãî|‚ãï|‚ãñ|‚ãó|‚ãò|‚ãô|‚ãö|‚ãõ|‚ãú|‚ãù|‚ãû|‚ãü|‚ã†|‚ã°|‚ã¢|‚ã£|‚ã§|‚ã•|‚ã¶|‚ãß|‚ã®|‚ã©|‚ã™|‚ã´|‚ã¨|‚ã≠|‚ãÆ|‚ãØ|‚ã∞|‚ã±|‚ã≤|‚ã≥|‚ã¥|‚ãµ|‚ã∂|‚ã∑|‚ã∏|‚ãπ|‚ã∫|‚ãª|‚ãº|‚ãΩ|‚ãæ|‚ãø]/.test(e))return!1;if(/[^\x00-\x7F]/.test(e))return!1;return[/√É√Ç[\u0080-\u00BF]/g,/√¢¬¨[¬¢¬¨¬•¬¶]/g,/√¢‚Ç¨[≈ì""¬ù‚Ä∞‚Äπ]/g,/\uFFFD/g,/[?]{5,}/g,/[\x80-\x8F\x90-\x9F][\x80-\xBF]/g,/[√É][√Ç\x80-\xBF]/g].some(t=>t.test(e))}addIssue(e,t,s,i=""){this.issues.push({severity:e,message:t,element:s,details:i,timestamp:(new Date).toISOString()})}reportResults(){if(0===this.issues.length)return console.log("‚úÖ Encoding validation passed - No issues detected"),void this.logSuccess();console.group("üö® Encoding Validation Issues Found"),this.issues.forEach((e,t)=>{const s="error"===e.severity?"‚ùå":"‚ö†Ô∏è";console.log(`${s} Issue ${t+1}: ${e.message}`),console.log(`   Element: ${e.element}`),e.details&&console.log(`   Details: ${e.details}`),console.log(`   Time: ${e.timestamp}`),console.log("---")}),console.groupEnd(),this.logIssues()}logSuccess(){"undefined"!=typeof gtag&&gtag("event","encoding_validation_success",{event_category:"technical",event_label:"utf_8_validation"})}logIssues(){"undefined"!=typeof gtag&&gtag("event","encoding_validation_error",{event_category:"technical",event_label:"utf_8_validation",value:this.issues.length}),"undefined"!=typeof dataLayer&&dataLayer.push({event:"encoding_issues_detected",issues:this.issues,total_issues:this.issues.length})}observeContentChanges(){if(!window.MutationObserver)return;new MutationObserver(e=>{let t=!1;e.forEach(e=>{"childList"===e.type&&e.addedNodes.length>0&&e.addedNodes.forEach(e=>{e.nodeType!==Node.TEXT_NODE&&e.nodeType!==Node.ELEMENT_NODE||(t=!0)}),"attributes"===e.type&&(t=!0)}),t&&setTimeout(()=>this.validate(),1e3)}).observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["content","title","alt","aria-label"]})}getResults(){return{valid:0===this.issues.length,issues:this.issues,timestamp:(new Date).toISOString()}}static validateText(e){return!(new EncodingValidator).detectCorruption(e)}}"undefined"!=typeof window&&(window.EncodingValidator=EncodingValidator,window.encodingValidator=new EncodingValidator,window.validateEncoding=()=>window.encodingValidator.validate(),console.log("üîç Encoding Validator initialized")),"undefined"!=typeof module&&module.exports&&(module.exports=EncodingValidator);