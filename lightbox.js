!function(){function e(){console.log("[Lightbox] Initializing lightbox script...");const e=document.getElementById("lightbox"),t=document.getElementById("lightbox-img"),n=document.getElementById("zoom-level"),o=e.querySelector(".lightbox-close"),i=e.querySelector(".lightbox-prev"),c=e.querySelector(".lightbox-next"),l=document.getElementById("zoom-in"),a=document.getElementById("zoom-out"),s=document.getElementById("rotate-left"),d=document.getElementById("rotate-right"),r=document.getElementById("reset-view"),u=document.querySelectorAll(".gallery-item img");console.log("[Lightbox] Found gallery items:",u.length);let g=0,m=1,h=0,f=0,b=0;let v=!1,y=null,L=[],E=null,x=null;function p(){t.style.transform=`translate(${f}px, ${b}px) scale(${m}) rotate(${h}deg)`,n.textContent=Math.round(100*m)+"%"}function k(){y=document.activeElement;const n=u[g];t.src=n.src,t.alt=n.alt||"Gallery image",e.classList.add("active"),document.body.style.overflow="hidden",function(){const t=["button:not([disabled])","[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])",'[tabindex]:not([tabindex="-1"])'];L=Array.from(e.querySelectorAll(t.join(", "))),E=L[0],x=L[L.length-1]}(),B(),w(),A(),setTimeout(()=>{o.focus()},100)}function I(){e.classList.remove("active"),document.body.style.overflow="",y&&y.focus&&y.focus(),B()}function w(){i.disabled=0===g,c.disabled=g===u.length-1}function A(){e.setAttribute("aria-hidden","false"),t.setAttribute("src",u[g].src),t.setAttribute("alt",u[g].alt||"Gallery image "+(g+1))}function B(){m=1,h=0,f=0,b=0,p()}function S(){m<4&&(m=Math.min(m+.25,4),p())}function q(){m>.5&&(m=Math.max(m-.25,.5),p())}function z(){if(g>0){g--;const e=u[g];t.src=e.src,t.alt=e.alt||"Gallery image",B(),w(),A()}}function D(){if(g<u.length-1){g++;const e=u[g];t.src=e.src,t.alt=e.alt||"Gallery image",B(),w(),A()}}u.forEach((e,t)=>{console.log("[Lightbox] Found gallery image:",e.src),e.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),console.log("[Lightbox] Image clicked, opening lightbox for index:",t),g=t,k()}),e.addEventListener("touchend",e=>{e.preventDefault(),e.stopPropagation(),console.log("[Lightbox] Image touched, opening lightbox for index:",t),g=t,k()})}),o.addEventListener("click",I),i.addEventListener("click",z),c.addEventListener("click",D),l&&l.addEventListener("click",S),a&&a.addEventListener("click",q),s&&s.addEventListener("click",function(){h-=90,p()}),d&&d.addEventListener("click",function(){h+=90,p()}),r&&r.addEventListener("click",B),document.addEventListener("keydown",t=>{if(e.classList.contains("active"))switch(t.key){case"Escape":I();break;case"ArrowLeft":z();break;case"ArrowRight":D();break;case"+":case"=":S();break;case"-":case"_":q()}});let G=0,M=0,X=0,Y=0;t.addEventListener("mousedown",e=>{m>1&&(v=!0,G=e.clientX,M=e.clientY,X=f,Y=b,t.style.cursor="grabbing",e.preventDefault())}),document.addEventListener("mousemove",e=>{if(v){const t=e.clientX-G,n=e.clientY-M;f=X+t,b=Y+n,p()}}),document.addEventListener("mouseup",()=>{v=!1,t.style.cursor="grab"});let $=0,C=0;t.addEventListener("touchstart",e=>{m>1&&1===e.touches.length&&($=e.touches[0].clientX,C=e.touches[0].clientY,X=f,Y=b)},{passive:!0}),t.addEventListener("touchmove",e=>{if(m>1&&1===e.touches.length){const t=e.touches[0].clientX-$,n=e.touches[0].clientY-C;f=X+t,b=Y+n,p(),e.preventDefault()}}),e.addEventListener("click",t=>{t.target===e&&I()}),console.log("[Lightbox] Lightbox initialized successfully")}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}();