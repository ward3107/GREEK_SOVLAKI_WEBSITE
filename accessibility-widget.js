!function(){"use strict";const t={settings:{fontSize:localStorage.getItem("a11y-fontSize")||"100",contrast:localStorage.getItem("a11y-contrast")||"normal",lineSpacing:localStorage.getItem("a11y-lineSpacing")||"normal",letterSpacing:localStorage.getItem("a11y-letterSpacing")||"normal"},init(){"true"!==sessionStorage.getItem("accessibilityWidgetClosed")&&(this.createWidget(),this.applySettings(),this.attachEventListeners(),this.initBadge())},initBadge(){"true"===localStorage.getItem("a11y-badge-hidden")&&this.hideBadge();const t=document.querySelector(".a11y-badge-close");t&&t.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),this.hideBadge(),localStorage.setItem("a11y-badge-hidden","true")})},hideBadge(){const t=document.getElementById("accessibility-badge-container");t&&t.classList.add("hidden")},createWidget(){const t=`\n        <div id="a11y-widget" class="a11y-widget">\n          <button id="a11y-widget-close" class="a11y-widget-close" aria-label="Close accessibility widget" title="הסתר כפתור נגישות">×</button>\n          <button id="a11y-toggle" class="a11y-toggle" aria-label="Open accessibility options" aria-expanded="false" aria-controls="a11y-panel">\n            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n              <circle cx="12" cy="12" r="10"></circle>\n              <circle cx="12" cy="8" r="1"></circle>\n              <line x1="12" y1="10" x2="12" y2="16"></line>\n              <line x1="8" y1="14" x2="16" y2="14"></line>\n            </svg>\n          </button>\n          <div id="a11y-panel" class="a11y-panel" role="dialog" aria-label="Accessibility Options" aria-hidden="true">\n            <div class="a11y-header">\n              <h3>אפשרויות נגישות</h3>\n              <button id="a11y-close" class="a11y-close" aria-label="Close accessibility options">✕</button>\n            </div>\n            <div class="a11y-controls">\n              <div class="a11y-control">\n                <label>גודל טקסט</label>\n                <div class="a11y-buttons">\n                  <button data-action="decreaseFontSize" aria-label="הקטן גודל טקסט">A-</button>\n                  <span id="font-size-value" aria-live="polite" aria-atomic="true">${this.settings.fontSize}%</span>\n                  <button data-action="increaseFontSize" aria-label="הגדל גודל טקסט">A+</button>\n                </div>\n              </div>\n              <div class="a11y-control">\n                <label>ניגודיות</label>\n                <div class="a11y-buttons">\n                  <button data-action="normalContrast" class="${"normal"===this.settings.contrast?"active":""}" aria-label="ניגודיות רגילה">רגיל</button>\n                  <button data-action="highContrast" class="${"high"===this.settings.contrast?"active":""}" aria-label="ניגודיות גבוהה">גבוה</button>\n                  <button data-action="invertContrast" class="${"invert"===this.settings.contrast?"active":""}" aria-label="הפוך ניגודיות">הפוך</button>\n                </div>\n              </div>\n              <div class="a11y-control">\n                <label>ריווח שורות</label>\n                <div class="a11y-buttons">\n                  <button data-action="normalLineSpacing" class="${"normal"===this.settings.lineSpacing?"active":""}" aria-label="ריווח שורות רגיל">רגיל</button>\n                  <button data-action="increaseLineSpacing" class="${"increased"===this.settings.lineSpacing?"active":""}" aria-label="ריווח שורות מוגבר">מוגבר</button>\n                </div>\n              </div>\n              <div class="a11y-control">\n                <label>ריווח אותיות</label>\n                <div class="a11y-buttons">\n                  <button data-action="normalLetterSpacing" class="${"normal"===this.settings.letterSpacing?"active":""}" aria-label="ריווח אותיות רגיל">רגיל</button>\n                  <button data-action="increaseLetterSpacing" class="${"increased"===this.settings.letterSpacing?"active":""}" aria-label="ריווח אותיות מוגבר">מוגבר</button>\n                </div>\n              </div>\n              <div class="a11y-control">\n                <button data-action="reset" class="a11y-reset" aria-label="איפוס כל הגדרות נגישות">איפוס הגדרות</button>\n              </div>\n              <div class="a11y-visibility-prompt" id="a11y-visibility-prompt" style="display: none;">\n                <p>להשאיר את כפתור הנגישות גלוי?</p>\n                <div class="a11y-buttons">\n                  <button data-visibility="visible" class="a11y-keep-visible" aria-label="השאר כפתור נגישות גלוי">כן, השאר גלוי</button>\n                  <button data-visibility="hidden" class="a11y-hide-widget" aria-label="הסתר כפתור נגישות">הסתר</button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      `;document.documentElement.insertAdjacentHTML("beforeend",t)},attachEventListeners(){const t=document.getElementById("a11y-toggle"),e=document.getElementById("a11y-close"),i=document.getElementById("a11y-panel"),n=document.getElementById("a11y-widget"),a=document.getElementById("a11y-visibility-prompt"),s=document.getElementById("a11y-widget-close"),o=this;s&&s.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),sessionStorage.setItem("accessibilityWidgetClosed","true"),n.classList.add("a11y-widget-hidden"),setTimeout(()=>{n.remove()},300)}),this.visibilityDecided=!1,this.widgetHidden=!1;const c=["footer",".footer-compact","#contact"];function l(){!function(){const e=t.getBoundingClientRect();for(const t of c){const i=document.querySelector(t);if(i){const t=i.getBoundingClientRect();if(e.bottom>=t.top&&e.top<=t.bottom)return!0}}return!1}()?t.classList.remove("light-mode"):t.classList.add("light-mode")}window.addEventListener("scroll",l,{passive:!0}),l(),this.closePanel=()=>{i.classList.remove("open"),t.setAttribute("aria-expanded","false"),i.setAttribute("aria-hidden","true")},t.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();const n=i.classList.toggle("open");t.setAttribute("aria-expanded",n),i.setAttribute("aria-hidden",!n)}),e.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),o.closePanel()});const r=i.querySelector(".a11y-controls");r&&r.addEventListener("click",t=>{const e=t.target.closest("[data-action]");if(e){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation();const i=e.getAttribute("data-action"),n=window.scrollY;o.handleAction(i),window.scrollTo(0,n)}}),i.addEventListener("mousedown",t=>{t.stopPropagation(),t.stopImmediatePropagation()}),i.addEventListener("click",t=>{t.stopPropagation(),t.stopImmediatePropagation()}),document.addEventListener("keydown",t=>{"Escape"===t.key&&i.classList.contains("open")&&o.closePanel()}),document.addEventListener("click",t=>{n.contains(t.target)||i.classList.contains("open")&&o.closePanel()},!1),a.addEventListener("click",t=>{const e=t.target.closest("[data-visibility]");if(e){t.preventDefault(),t.stopPropagation();const i=e.getAttribute("data-visibility");o.visibilityDecided=!0,e.blur(),"hidden"===i?(o.widgetHidden=!0,o.closePanel(),n.remove()):(o.widgetHidden=!1,a.style.display="none")}})},showVisibilityPrompt(){const t=document.getElementById("a11y-visibility-prompt");t&&!this.visibilityDecided&&(t.style.display="block")},handleAction(t){switch(t){case"increaseFontSize":this.settings.fontSize=Math.min(parseInt(this.settings.fontSize)+10,200).toString();break;case"decreaseFontSize":this.settings.fontSize=Math.max(parseInt(this.settings.fontSize)-10,80).toString();break;case"normalContrast":this.settings.contrast="normal";break;case"highContrast":this.settings.contrast="high";break;case"invertContrast":this.settings.contrast="invert";break;case"normalLineSpacing":this.settings.lineSpacing="normal";break;case"increaseLineSpacing":this.settings.lineSpacing="increased";break;case"normalLetterSpacing":this.settings.letterSpacing="normal";break;case"increaseLetterSpacing":this.settings.letterSpacing="increased";break;case"reset":this.settings={fontSize:"100",contrast:"normal",lineSpacing:"normal",letterSpacing:"normal"},Object.keys(this.settings).forEach(t=>{localStorage.removeItem(`a11y-${t}`)})}this.applySettings(),this.saveSettings(),this.updateUI(),"reset"!==t&&this.showVisibilityPrompt()},applySettings(){const t=document.documentElement;this.settings;const e=parseInt(this.settings.fontSize);t.style.fontSize=e+"%",document.body.classList.remove("a11y-high-contrast","a11y-invert-contrast"),"high"===this.settings.contrast?document.body.classList.add("a11y-high-contrast"):"invert"===this.settings.contrast&&document.body.classList.add("a11y-invert-contrast"),"increased"===this.settings.lineSpacing?t.style.setProperty("--line-height","2"):t.style.setProperty("--line-height","1.6"),"increased"===this.settings.letterSpacing?t.style.setProperty("--letter-spacing","0.1em"):t.style.setProperty("--letter-spacing","normal")},saveSettings(){Object.keys(this.settings).forEach(t=>{localStorage.setItem(`a11y-${t}`,this.settings[t])})},updateUI(){const t=document.getElementById("font-size-value");t&&(t.textContent=this.settings.fontSize+"%"),document.querySelectorAll("[data-action]").forEach(t=>{t.classList.remove("active")});const e={contrast:`${this.settings.contrast}Contrast`,lineSpacing:"increased"===this.settings.lineSpacing?"increaseLineSpacing":"normalLineSpacing",letterSpacing:"increased"===this.settings.letterSpacing?"increaseLetterSpacing":"normalLetterSpacing"};Object.values(e).forEach(t=>{const e=document.querySelector(`[data-action="${t}"]`);e&&e.classList.add("active")})}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>t.init()):t.init()}();