!function(){"use strict";class t{constructor(){this.container=null,this.buttons=null,this.init()}init(){this.container=document.querySelector(".whatsapp-floating"),this.buttons=document.querySelectorAll(".whatsapp-circle"),console.log("WhatsApp Debug - Container:",this.container),console.log("WhatsApp Debug - Buttons found:",this.buttons.length),this.container&&0!==this.buttons.length?(document.documentElement.appendChild(this.container),this.setupButtons(),this.setupPositioning(),this.setupAccessibility(),console.log("WhatsApp buttons initialized successfully - moved to documentElement")):console.error("WhatsApp buttons not found - container:",this.container,"buttons:",this.buttons.length)}setupButtons(){this.buttons.forEach((t,e)=>{t.addEventListener("click",s=>{this.trackWhatsAppClick(t.getAttribute("href"),e)}),t.addEventListener("keydown",e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),t.click())})})}setupPositioning(){this.adjustForAccessibilityWidget(),this.observeAccessibilityWidget(),this.setupScrollBehavior(),this.animateEntrance()}adjustForAccessibilityWidget(){const t=document.getElementById("accessibility-badge-container");if(t){const e=!t.classList.contains("hidden");this.container.style.bottom=e?"140px":"120px"}}observeAccessibilityWidget(){const t=document.getElementById("accessibility-badge-container");if(t&&window.MutationObserver){new MutationObserver(t=>{t.forEach(t=>{"attributes"===t.type&&"class"===t.attributeName&&this.adjustForAccessibilityWidget()})}).observe(t,{attributes:!0,attributeFilter:["class"]})}}setupScrollBehavior(){let t,e=window.scrollY,s="down",n=0;console.log("WhatsApp Debug - Setting up scroll behavior"),window.addEventListener("scroll",()=>{const o=window.scrollY,i=o-e;if(console.log("WhatsApp Debug - Scroll detected, diff:",i,"currentY:",o),n=i,s=i>0?"down":"up",Math.abs(i)>2){const e=Math.min(o/300,1),s=Math.min(15*e,20);console.log("WhatsApp Debug - Scroll: currentY=",o,"moveAmount=",s),this.container.style.transform=`translateY(-${s}px)`,this.container.style.opacity=Math.max(.5,Math.min(.8,.5+.3*e)),clearTimeout(t),t=setTimeout(()=>{console.log("WhatsApp Debug - Resetting position to origin"),this.container.style.transform="translateY(0)",this.container.style.opacity="0.5"},150)}e=o},{passive:!0}),this.setupHorizontalScrollEffect()}setupHorizontalScrollEffect(){let t=window.scrollX||window.pageXOffset;window.addEventListener("scroll",()=>{const e=window.scrollX||window.pageXOffset,s=e-t;if(Math.abs(s)>2){const t=.1*s;this.container.style.transform+=` translateX(${t}px)`,setTimeout(()=>{this.resetTransform()},100)}t=e},{passive:!0})}resetTransform(){const t=this.container.style.transform;if(t){const e=t.match(/translateY\([^)]+\)/);e&&(this.container.style.transform=e[1])}}animateEntrance(){this.buttons.forEach((t,e)=>{t.style.opacity="0",t.style.transform="translateY(20px) scale(0.8)",setTimeout(()=>{t.style.transition="all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",t.style.opacity="1",t.style.transform="translateY(0) scale(1)"},500+150*e)})}trackWhatsAppClick(t,e){console.log(`WhatsApp clicked: Button ${e+1}, URL: ${t}`);try{const s=JSON.parse(localStorage.getItem("whatsapp_interactions")||"[]");s.push({timestamp:Date.now(),buttonIndex:e,url:t,page:window.location.pathname}),s.length>50&&s.splice(0,s.length-50),localStorage.setItem("whatsapp_interactions",JSON.stringify(s))}catch(t){}}setupAccessibility(){this.buttons.forEach(t=>{t.setAttribute("role","button"),t.setAttribute("tabindex","0")})}}function e(){try{new t}catch(t){console.error("Error initializing WhatsApp buttons:",t)}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e(),window.WhatsAppButtons={getStats:function(){try{const t=JSON.parse(localStorage.getItem("whatsapp_interactions")||"[]");return{totalClicks:t.length,lastClick:t.length>0?t[t.length-1]:null}}catch(t){return{totalClicks:0,lastClick:null}}},testMovement:function(){const t=document.querySelector(".whatsapp-floating");t&&(console.log("Testing WhatsApp movement..."),t.style.transform="translateY(-30px) scale(0.9)",t.style.opacity="0.8",setTimeout(()=>{t.style.transform="translateY(0) scale(1)",t.style.opacity="0.5"},1e3))}}}();