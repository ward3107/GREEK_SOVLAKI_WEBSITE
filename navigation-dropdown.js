!function(){"use strict";class e{constructor(){this.activeDropdown=null,this.isMobile=window.innerWidth<=768,this.init()}init(){this.setupDropdowns(),this.setupEventListeners(),this.setupKeyboardNavigation(),this.setupResponsiveHandling()}setupDropdowns(){document.querySelectorAll(".nav-dropdown").forEach(e=>{const t=e.querySelector(".nav-dropdown-toggle"),o=e.querySelector(".nav-dropdown-panel");t&&o&&(t.setAttribute("aria-expanded","false"),o.setAttribute("aria-hidden","true"),e.toggle=t,e.panel=o)})}setupEventListeners(){document.querySelectorAll(".nav-dropdown").forEach(e=>{const t=e.toggle,o=e.panel;if(!t||!o)return;const n=t=>{t.preventDefault(),t.stopPropagation(),this.toggleDropdown(e)};t.addEventListener("click",n),t.addEventListener("touchstart",n,{passive:!1}),t.addEventListener("touchend",n,{passive:!1});const r=o.querySelectorAll(".nav-dropdown-item");r.forEach(t=>{t.addEventListener("click",o=>{const n=t.getAttribute("href"),s=e.querySelector(".current-nav-item");if(s&&(s.textContent=t.textContent.trim()),r.forEach(e=>e.classList.remove("active")),t.classList.add("active"),n&&n.startsWith("#")){o.preventDefault(),this.closeDropdown(e);const t=document.querySelector(".nav-menu"),r=document.querySelector(".hamburger");t&&r&&"true"===r.getAttribute("aria-expanded")&&(t.classList.remove("active"),r.setAttribute("aria-expanded","false"));const s=document.querySelector(n);if(s){const e=document.querySelector(".navbar"),t=e?e.offsetHeight:0,o=s.offsetTop-t-20;window.scrollTo({top:o,behavior:"smooth"})}}else setTimeout(()=>{this.closeDropdown(e)},150)})}),o.addEventListener("click",e=>{e.stopPropagation()}),this.isMobile||(e.addEventListener("mouseenter",()=>{this.activeDropdown!==e&&(this.closeAllDropdowns(),this.openDropdown(e))}),e.addEventListener("mouseleave",()=>{setTimeout(()=>{e.matches(":hover")||this.closeDropdown(e)},100)}))}),document.addEventListener("click",e=>{e.target.closest(".nav-dropdown")||this.closeAllDropdowns()}),document.addEventListener("keydown",e=>{"Escape"===e.key&&(this.closeAllDropdowns(),this.activeDropdown&&this.activeDropdown.toggle&&this.activeDropdown.toggle.focus())}),window.addEventListener("resize",()=>{const e=this.isMobile;this.isMobile=window.innerWidth<=768,e!==this.isMobile&&this.resetDropdowns()})}setupKeyboardNavigation(){document.querySelectorAll(".nav-dropdown").forEach(e=>{const t=e.toggle,o=e.panel;if(!t||!o)return;t.addEventListener("keydown",n=>{if("Enter"!==n.key&&" "!==n.key||(n.preventDefault(),this.toggleDropdown(e)),"ArrowDown"===n.key&&"true"===t.getAttribute("aria-expanded")){n.preventDefault();const e=o.querySelector(".nav-dropdown-item");e&&e.focus()}});const n=o.querySelectorAll(".nav-dropdown-item");n.forEach((o,r)=>{o.addEventListener("keydown",o=>{switch(o.key){case"ArrowDown":o.preventDefault();const s=n[r+1];s&&s.focus();break;case"ArrowUp":o.preventDefault();const i=n[r-1];i?i.focus():t.focus();break;case"Escape":o.preventDefault(),this.closeDropdown(e),t.focus()}})})})}setupResponsiveHandling(){const e=document.querySelector(".hamburger"),t=document.querySelector(".nav-menu");e&&t&&e.addEventListener("click",()=>{"true"===e.getAttribute("aria-expanded")||this.closeAllDropdowns()})}toggleDropdown(e){this.activeDropdown===e?this.closeDropdown(e):(this.closeAllDropdowns(),this.openDropdown(e))}openDropdown(e){const t=e.toggle,o=e.panel;t&&o&&(t.setAttribute("aria-expanded","true"),o.setAttribute("aria-hidden","false"),this.activeDropdown=e,e.classList.add("dropdown-active"),this.isMobile||setTimeout(()=>{o.querySelector(".nav-dropdown-item")&&document.activeElement},100))}closeDropdown(e){const t=e.toggle,o=e.panel;if(!t||!o)return;const n=o.querySelector(".nav-dropdown-item:focus");n&&(n.blur(),t&&t.focus()),t.setAttribute("aria-expanded","false"),o.setAttribute("aria-hidden","true"),e.classList.remove("dropdown-active"),this.activeDropdown===e&&(this.activeDropdown=null)}closeAllDropdowns(){document.querySelectorAll(".nav-dropdown").forEach(e=>{this.closeDropdown(e)})}resetDropdowns(){document.querySelectorAll(".nav-dropdown").forEach(e=>{const t=e.toggle,o=e.panel;t&&o&&(t.setAttribute("aria-expanded","false"),o.setAttribute("aria-hidden","true"),e.classList.remove("dropdown-active"))}),this.activeDropdown=null}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{new e}):new e}();