class EncodingValidator{constructor(){this.issues=[],this.init()}init(){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>this.validate()):this.validate(),this.observeContentChanges()}validate(){return this.issues=[],this.validateMetaCharset(),this.validateHtmlAttributes(),this.validateTextContent(),this.validateLanguageDeclarations(),this.reportResults(),0===this.issues.length}validateMetaCharset(){const t=document.querySelector("meta[charset]");if(!t)return void this.addIssue("error","Missing meta charset declaration","head");const e=t.getAttribute("charset")?.toLowerCase();"utf-8"!==e&&this.addIssue("error",`Invalid charset: ${e}. Expected: utf-8`,"meta[charset]")}validateHtmlAttributes(){["content","title","alt","placeholder","aria-label"].forEach(t=>{document.querySelectorAll(`[${t}]`).forEach(e=>{const s=e.getAttribute(t);!s||s.length<5||this.detectCorruption(s)&&this.addIssue("error",`Corrupted text in ${t} attribute`,e.tagName+"["+t+"]",s)})})}validateTextContent(){["title","h1","h2","h3","h4","h5","h6","p","span","div","[data-lang]",'meta[name="description"]','meta[name="keywords"]'].forEach(t=>{document.querySelectorAll(t).forEach(e=>{if("SCRIPT"===e.tagName||"STYLE"===e.tagName||e.classList.contains("gallery-item")||e.classList.contains("menu-item")||e.classList.contains("contact-info")||e.closest(".gallery")||e.closest(".menu-section"))return;const s=e.textContent||e.getAttribute("content")||"";s.length>20&&this.detectCorruption(s)&&this.addIssue("warning","Potential encoding corruption detected",t,s.substring(0,50)+"...")})})}validateLanguageDeclarations(){document.documentElement.getAttribute("lang")||this.addIssue("warning","Missing language declaration on html element","html"),document.querySelectorAll('link[rel="alternate"][hreflang]').forEach(t=>{const e=t.getAttribute("hreflang");e&&/^[a-z]{2}(-[A-Z]{2})?$/.test(e)||this.addIssue("warning",`Invalid hreflang: ${e}`,"link[hreflang]")})}detectCorruption(t){return!(!t||t.length<10)&&!/[\u0590-\u05FF\u05EA\u0600-\u06FF\u0400-\u04FF\u0370-\u03FF\u2600-\u27BF\u1F300-\u1F9FF\u20A0-\u20CF\u2005-\u2007\u200B-\u200F\u2000-\u206F\u0300-\u036F&]/.test(t)&&!/[\u05D0-\u05EA]|[\u0621-\u064A]|[\u0410-\u044F]|[\u0391-\u03F1]|Â©|Â®|â„¢|Â°|Â±|Ã—|Ã·|â‰¤|â‰¥|â‰ |â‰ˆ|âˆž|âˆ‘|âˆ|âˆ«|âˆ‚|âˆ‡|âˆ†|âˆ…|âˆˆ|âˆ‰|âˆ‹|âŠ‚|âŠƒ|âŠ„|âŠ…|âˆ§|âˆ¨|Â¬|â†’|â†|â†‘|â†“|â†”|â‡’|â‡|â‡‘|â‡“|â‡”|âˆ€|âˆƒ|âˆ„|âˆ´|âˆµ|âˆ¶|âˆ·|âˆ|âˆž|âˆŸ|âˆ |âˆ¡|âˆ¢|âˆ¥|âˆ¦|âˆ§|âˆ¨|âˆ©|âˆª|âŠ‚|âŠƒ|âŠ„|âŠ…|âŠ†|âŠ‡|âŠˆ|âŠ‰|âŠŠ|âŠ‹|âŠŒ|âŠ|âŠŽ|âŠ|âŠ|âŠ‘|âŠ’|âŠ“|âŠ”|âŠ•|âŠ–|âŠ—|âŠ˜|âŠ™|âŠš|âŠ›|âŠœ|âŠ|âŠž|âŠŸ|âŠ |âŠ¡|âŠ¢|âŠ£|âŠ¤|âŠ¥|âŠ¦|âŠ§|âŠ¨|âŠ©|âŠª|âŠ«|âŠ¬|âŠ­|âŠ®|âŠ¯|âŠ°|âŠ±|âŠ²|âŠ³|âŠ´|âŠµ|âŠ¸|âŠ¹|âŠº|âŠ»|âŠ¼|âŠ½|âŠ¾|âŠ¿|â‹€|â‹|â‹‚|â‹ƒ|â‹„|â‹…|â‹†|â‹‡|â‹ˆ|â‹‰|â‹Š|â‹‹|â‹Œ|â‹|â‹Ž|â‹|â‹|â‹‘|â‹’|â‹“|â‹”|â‹•|â‹–|â‹—|â‹˜|â‹™|â‹š|â‹›|â‹œ|â‹|â‹ž|â‹Ÿ|â‹ |â‹¡|â‹¢|â‹£|â‹¤|â‹¥|â‹¦|â‹§|â‹¨|â‹©|â‹ª|â‹«|â‹¬|â‹­|â‹®|â‹¯|â‹°|â‹±|â‹²|â‹³|â‹´|â‹µ|â‹¶|â‹·|â‹¸|â‹¹|â‹º|â‹»|â‹¼|â‹½|â‹¾|â‹¿]/.test(t)&&!/[^\x00-\x7F]/.test(t)&&[/ÃƒÃ‚[\u0080-\u00BF]/g,/Ã¢Â¬[Â¢Â¬Â¥Â¦]/g,/Ã¢â‚¬[Å“""Ââ€°â€¹]/g,/\uFFFD/g,/[?]{5,}/g,/[\x80-\x8F\x90-\x9F][\x80-\xBF]/g,/[Ãƒ][Ã‚\x80-\xBF]/g].some(e=>e.test(t))}addIssue(t,e,s,a=""){this.issues.push({severity:t,message:e,element:s,details:a,timestamp:(new Date).toISOString()})}reportResults(){0!==this.issues.length?(console.group("ðŸš¨ Encoding Validation Issues Found"),this.issues.forEach((t,e)=>{t.severity;t.message,t.element,t.details&&t.details,t.timestamp}),console.groupEnd(),this.logIssues()):this.logSuccess()}logSuccess(){"undefined"!=typeof gtag&&gtag("event","encoding_validation_success",{event_category:"technical",event_label:"utf_8_validation"})}logIssues(){"undefined"!=typeof gtag&&gtag("event","encoding_validation_error",{event_category:"technical",event_label:"utf_8_validation",value:this.issues.length}),"undefined"!=typeof dataLayer&&dataLayer.push({event:"encoding_issues_detected",issues:this.issues,total_issues:this.issues.length})}observeContentChanges(){window.MutationObserver&&new MutationObserver(t=>{let e=!1;t.forEach(t=>{"childList"===t.type&&t.addedNodes.length>0&&t.addedNodes.forEach(t=>{t.nodeType!==Node.TEXT_NODE&&t.nodeType!==Node.ELEMENT_NODE||(e=!0)}),"attributes"===t.type&&(e=!0)}),e&&setTimeout(()=>this.validate(),1e3)}).observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["content","title","alt","aria-label"]})}getResults(){return{valid:0===this.issues.length,issues:this.issues,timestamp:(new Date).toISOString()}}static validateText(t){return!(new EncodingValidator).detectCorruption(t)}}"undefined"!=typeof window&&(window.EncodingValidator=EncodingValidator,window.encodingValidator=new EncodingValidator,window.validateEncoding=()=>window.encodingValidator.validate()),"undefined"!=typeof module&&module.exports&&(module.exports=EncodingValidator);